CREATE TABLE SERVICE_AUDIT
(
    id                 NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SERVICE_NAME       VARCHAR2(20) NOT NULL,
    HOST_NAME          VARCHAR2(30) NOT NULL,
    REQUEST_URI        VARCHAR2(30) NOT NULL,
    REQUEST_BODY       CLOB,
    REQUEST_HEADERS    CLOB,
    REQUEST_METHOD     VARCHAR2(10) NOT NULL,
    REQUEST_TIMESTAMP  TIMESTAMP NOT NULL,
    RESPONSE_TIMESTAMP TIMESTAMP,
    RESPONSE_STATUS    NUMBER(3),
    RESPONSE_BODY      CLOB,
    DURATION           NUMBER(10),
    ERROR_MESSAGE      VARCHAR2(255) NOT NULL
);

CREATE TABLE CLIENT_AUDIT
(
    CLIENT_AUDIT_ID  VARCHAR2(36) PRIMARY KEY,
    SERVICE_AUDIT_ID VARCHAR2(36) NOT NULL,
    EXTERNAL_API_URL VARCHAR2(255) NOT NULL,
    METHOD           VARCHAR2(10) NOT NULL,
    REQUEST_HEADERS  CLOB,
    REQUEST_BODY     CLOB,
    RESPONSE_BODY    CLOB,
    RESPONSE_STATUS  NUMBER(3),
    DURATION_MILLIS  NUMBER(10),
    CONSTRAINT FK_SERVICE_AUDIT FOREIGN KEY (SERVICE_AUDIT_ID) REFERENCES SERVICE_AUDIT (SERVICE_AUDIT_ID) ON DELETE CASCADE
);